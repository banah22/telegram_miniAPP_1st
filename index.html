<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mini App</title>
  <style>
    #output {
      white-space: pre-wrap; /* For proper line breaks */
    }
  </style>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

  <div id="output"></div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const outputDiv = document.getElementById('output');

      // Initialize Telegram Web App
      Telegram.WebApp.ready();

      function logToMiniApp(message) {
        outputDiv.textContent += message + '\n';
      }

      // Accessing user data from initData
      const initData = Telegram.WebApp.initData;
      const params = new URLSearchParams(initData);
      const userData = Object.fromEntries(params);
      
      if (userData.user) {
        const user = JSON.parse(userData.user); // Parse the user object
        logToMiniApp("User ID: " + user.id);
        logToMiniApp("First Name: " + (user.first_name || "Имя не указано"));
        logToMiniApp("Last Name: " + (user.last_name || "Фамилия не указана"));
        logToMiniApp("Username: " + (user.username || "Имя пользователя не указано"));
      } else {
        logToMiniApp("User data not available.");
      }
    });
  </script>

</body>
</html>
