<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mini App</title>
    <style>
        body {
            display: flex;
            flex-direction: column; /* –†–∞—Å–ø–æ–ª–∞–≥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ */
            align-items: flex-start; /* –í—ã—Ä–æ–≤–Ω—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é */
            height: 100vh; /* –ó–∞–Ω—è—Ç—å –≤—Å—é –≤—ã—Å–æ—Ç—É –æ–∫–Ω–∞ */
            margin: 0;
            background-color: #ebffe0;
            padding: 20px; /* –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ */
            overflow: hidden; /* –°–∫—Ä—ã—Ç—å –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
        }

        .user-info {
            display: flex;
            align-items: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∞–≤–∞—Ç–∞—Ä –∏ –∏–º—è –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
            margin-bottom: 20px; /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
        }

        .user-info img {
            width: 50px; 
            height: 50px;
            border-radius: 50%; 
            margin-right: 10px; 
        }

        .user-info span {
            font-weight: bold; 
        }

        button {
            position: absolute; /* –§–∏–∫—Å–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –≤–Ω–∏–∑—É */
            bottom: 20px; /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
            left: 50%; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
            transform: translateX(-50%); /* –°–º–µ—â–∞–µ–º –∫–Ω–æ–ø–∫—É –Ω–∞ –ø–æ–ª–æ–≤–∏–Ω—É –µ—ë —à–∏—Ä–∏–Ω—ã –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è */
            padding: 10px 40px;
            font-size: 16px;
            background-color: #4CAF50; /* –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            color: white;
            border: none;
            border-radius: 5px;
        }

        #timer {
            position: absolute; /* –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º —Ç–∞–π–º–µ—Ä –ø–æ —Ü–µ–Ω—Ç—Ä—É */
            top: 50%; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
            left: 50%; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
            transform: translate(-50%, -50%); /* –°–º–µ—â–∞–µ–º –Ω–∞ –ø–æ–ª–æ–≤–∏–Ω—É —à–∏—Ä–∏–Ω—ã –∏ –≤—ã—Å–æ—Ç—ã –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è */
        }

        svg {
            width: 150px; /* –®–∏—Ä–∏–Ω–∞ –∫—Ä—É–≥–∞ */
            height: 150px; /* –í—ã—Å–æ—Ç–∞ –∫—Ä—É–≥–∞ */

        
            
        }

        circle {
            fill: #ccd1cb;
            stroke-width: 5;
            transform: rotate(-90deg);
            transform-origin: center;
            
        }

        .background {
            stroke: #bbb0ac; /* –¶–≤–µ—Ç —Ñ–æ–Ω–∞ –∫—Ä—É–≥–∞ */
            
        }

        .progress {
            stroke: #4CAF50; /* –¶–≤–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è */
            transition: stroke-dashoffset 1s linear; /* –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ */
            
            
        }

        .progress-dot {
            fill: #4CAF50; /* –¶–≤–µ—Ç –∫—Ä—É–∂–æ—á–∫–∞ –≤ –Ω–∞—á–∞–ª–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ */
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
        .modal {
            display: none; /* –°–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            position: fixed; /* –û–≤–µ—Ä–ª–µ–π –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
            z-index: 1; /* –ù–∞ –ø–µ—Ä–µ–¥–Ω–µ–º –ø–ª–∞–Ω–µ */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; /* –ü—Ä–æ–∫—Ä—É—Ç–∫–∞, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ */
            background-color: rgb(0,0,0); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
            background-color: rgba(0,0,0,0.4); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ */
            padding: 20px;
            border: 1px solid #888;
            width: 80%; /* –®–∏—Ä–∏–Ω–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
        }
        
    </style>
    
</head>
<body>

    <div class="user-info">
        <img id="userAvatar" alt="User Avatar">
        <span id="userName">User Name</span>
    </div>

    <div id="output"></div> 

    <!-- –ó–≤—É–∫–æ–≤–æ–π —Ñ–∞–π–ª -->
    <audio id="timerSound" src="lz.mp3"></audio>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div id="voteModal" class="modal">
      <div class="modal-content">
          <h2>How it was?</h2>
          <form id="voteForm">
              <div class="vote-options"> <!-- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ–ø—Ü–∏–π –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è**
              <label><input type="radio" name="vote" value="option1"> Hardworküü¢ </label>
              <label><input type="radio" name="vote" value="option2"> Variousüü°</label>
              <label><input type="radio" name="vote" value="option3"> LazyZopaüî¥ </label>
              </div><br>
              <button type="button" onclick="submitVote()">Vote</button>
          </form>
      </div>
    </div>
    
    <div id="timer">
        <svg viewBox="0 0 100 100">
        <!-- –û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ–±–ª–∞—Å—Ç—å –æ–±—Ä–µ–∑–∫–∏ -->
                <defs>
                    <clipPath id="circleClip">
                        <circle cx="50" cy="50" r="40" /> <!-- –ö—Ä—É–≥ –¥–ª—è –æ–±—Ä–µ–∑–∫–∏ -->
                    </clipPath>
                </defs>
            <circle class="background" cx="50" cy="50" r="45"></circle>
            <circle class="progress" cx="50" cy="50" r="45"></circle>
            
            <!-- –ö—Ä—É–∂–æ—á–µ–∫ –≤ –Ω–∞—á–∞–ª–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ -->
            <circle class="progress-dot" cx="95" cy="50" r="5" /> <!-- –£–≤–µ–ª–∏—á–µ–Ω —Ä–∞–¥–∏—É—Å –∫—Ä—É–∂–æ—á–∫–∞ -->
            
            <!-- –í—Å—Ç–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫—Ä—É–≥ -->
            <image href="ggirl.png" x="10" y="10" height="90" width="90" clip-path="url(#circleClip)" />
        </svg>
    </div>

    <button id="timerButton" onclick="toggleTimer()">Start</button>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <script>
        let timerInterval = null; // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ —Ç–∞–π–º–µ—Ä–∞
        let seconds = 0; // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
        const totalTime = 60; // –û–±—â–µ–µ –≤—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ –∂–µ–ª–∞–Ω–∏—é)
        
        const progressCircle = document.querySelector('.progress');
        const sound = document.getElementById('timerSound'); // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –∞—É–¥–∏–æ
        const voteModal = document.getElementById('voteModal'); // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫—Ä—É–≥–∞
        const circumference = 2 * Math.PI * 45; // –î–ª–∏–Ω–∞ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏
        progressCircle.style.strokeDasharray = `${circumference}`; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–ª–∏–Ω—É –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏
        progressCircle.style.strokeDashoffset = `${circumference}`; // –ù–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–≤–∏–¥–∏–º–æ)

        document.addEventListener('DOMContentLoaded', () => {
         // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
         Telegram.WebApp.ready();
         // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
         Telegram.WebApp.expand();

         const outputDiv = document.getElementById('output');
         const initData = Telegram.WebApp.initData;

         const params = new URLSearchParams(initData);
         const userData = Object.fromEntries(params);

         if (userData.user) {
           const user = JSON.parse(userData.user); 
           
           //  outputDiv.textContent += `Username: ${user.username || "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ —É–∫–∞–∑–∞–Ω–æ"}\n`;
          //   console.log(userData); // –í—ã–≤–æ–¥–∏–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

           document.getElementById('userName').textContent = user.first_name || "–ò–º—è –Ω–µ —É–∫–∞–∑–∞–Ω–æ";
           if (user.photo_url) {
             document.getElementById('userAvatar').src = user.photo_url;
           }
         } else {
           outputDiv.textContent += "User data not available.";
           document.getElementById('userName').textContent = "User data not available.";
            document.getElementById('userAvatar').src = 'banah.png'; 
         }
       });

       function toggleTimer() {
         const timerButton = document.getElementById('timerButton');
         
         if (timerInterval) {
           clearInterval(timerInterval); // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä
           timerInterval = null;
           timerButton.textContent = "Start"; // –ò–∑–º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –Ω–∞ "Start"   
           timerButton.style.backgroundColor = "#4CAF50"; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç
            sound.play(); // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
           resetTimer(); // –°–±—Ä–æ—Å–∏—Ç—å —Ç–∞–π–º–µ—Ä
         } else {
           startTimer();
           timerButton.textContent = "Stop"; // –ò–∑–º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –Ω–∞ "Stop"
           timerButton.style.backgroundColor = "red"; // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç –∫–Ω–æ–ø–∫–∏ –Ω–∞ –∫—Ä–∞—Å–Ω—ã–π
         }
       }

       function startTimer() {
         seconds = 0; // –°–±—Ä–æ—Å–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ —Å–µ–∫—É–Ω–¥


         timerInterval = setInterval(() => {
           seconds++; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Å–µ–∫—É–Ω–¥
           
           const offset = (1 - (seconds / totalTime)) * circumference; // –í—ã—á–∏—Å–ª—è–µ–º —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏
           progressCircle.style.strokeDashoffset = offset; // –û–±–Ω–æ–≤–ª—è–µ–º —Å–º–µ—â–µ–Ω–∏–µ

           // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –∫—Ä—É–∂–æ—á–∫–∞
           const angle = (seconds / totalTime) * (2 * Math.PI); // –í—ã—á–∏—Å–ª—è–µ–º —É–≥–æ–ª –≤ —Ä–∞–¥–∏–∞–Ω–∞—Ö
           const dotX = 50 + Math.cos(angle) * (45); // –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É X –∫—Ä—É–∂–æ—á–∫–∞
           const dotY = 50 + Math.sin(angle) * (45); // –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É Y –∫—Ä—É–∂–æ—á–∫–∞

           document.querySelector('.progress-dot').setAttribute('cx', dotX);
           document.querySelector('.progress-dot').setAttribute('cy', dotY);

           if (seconds >= totalTime) {
             clearInterval(timerInterval); // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏
           
             timerInterval = null;
             document.getElementById('timerButton').textContent = "Start"; // –ò–∑–º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –Ω–∞ "Start"
             document.getElementById('timerButton').style.backgroundColor = "#4CAF50"; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç
             sound.play(); // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫
             voteModal.style.display = "block"; // **–ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ–º**
             resetTimer(); // –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
           }
           
         }, 1000); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
       }

       function resetTimer() {
         seconds = 0; 
         progressCircle.style.strokeDashoffset = `${circumference}`; // –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±—Ä–∞—Ç–Ω–æ –∫ –Ω–∞—á–∞–ª—É

         // –°–±—Ä–æ—Å–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –∫—Ä—É–∂–æ—á–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ –∫ –Ω–∞—á–∞–ª—É
         document.querySelector('.progress-dot').setAttribute('cx', '95');
         document.querySelector('.progress-dot').setAttribute('cy', '50'); 
       }
    function submitVote() {
          const form = document.getElementById('voteForm');
          const selectedOption = form.vote.value;

          if (selectedOption) {
              alert(`–í—ã –≤—ã–±—Ä–∞–ª–∏ ${selectedOption}`); // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
              voteModal.style.display = "none"; // –°–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ—Å–ª–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
          } else {
              alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç!");
          }
      }
      
      window.onclick = function(event) {
          if (event.target == voteModal) {
              voteModal.style.display = "none"; // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ –æ–±–ª–∞—Å—Ç–∏
          }
      }
    </script>

</body>
</html>
